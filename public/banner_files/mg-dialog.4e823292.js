/*! License information is available at licenses.txt */(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["mg-dialog"],{"0182":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"mail"},[e("inputPlugin",{staticClass:"input",attrs:{disabled:!1,placeholder:t.$t("新邮箱"),size:"small",error:t.errorList.emailError},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),e("div",{staticClass:"password"},[e("inputPlugin",{attrs:{disabled:!1,placeholder:t.$t("用户密码"),type:t.passwordType,size:"small",error:t.errorList.passwordError},on:{focus:t.changeType},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)])},a=[],o=s("f3e7"),r=s("1471"),n={name:"MailDialog",components:{inputPlugin:r["a"]},data(){return{errorList:{emailError:{},passwordError:{}},email:"",password:"",passwordType:"text",merror:"",perror:"",emailErrPro:[{type:"error",msg:o["ub"].t("邮箱已经使用")},{type:"warning",msg:o["ub"].t("邮箱格式不正确")},{type:"warning",msg:o["ub"].t("邮箱不能为空")}],passErrpro:[{type:"error",msg:o["ub"].t("输入正确的账号密码")},{type:"warning",msg:o["ub"].t("密码不能为空")}]}},created(){this.email="",this.password=""},methods:{check(t){const e=t[0],s=t[1];"email"===e?(this.errorList.emailError=this.emailErrPro[s],this.errorList.passwordErro={}):"pass"===e&&(this.errorList.passwordError=this.passErrpro[s],this.errorList.emailError={})},changeType(){"password"!==this.passwordType&&(this.passwordType="password")},init(){this.email="",this.password="",this.merror="",this.perror="",this.passwordType="text"}}},l=n,c=(s("f29e"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,"3c4477c6",null);e["default"]=d.exports},"06ec":function(t,e,s){},"0a30":function(t,e,s){},"0c80":function(t,e,s){},"0c87":function(t,e,s){"use strict";s("c658")},1471:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"container"},[t.color?e("div",{staticClass:"input_form",style:{background:t.color}}):t._e(),e("input",{ref:"inputHandler",class:[t.types,t.status,t.size?"mas-form-input-"+t.size:"",t.disabled?"input-disabled":""],attrs:{autocomplete:"off","aria-autocomplete":"none",placeholder:t.placeholder,type:t.type,disabled:t.disabled,maxlength:t.maxLength},domProps:{value:t.value},on:{keydown:t.keydown,input:t.input,change:t.change,focus:t.inputFocus,blur:t.inputBlur,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.escHandler.apply(null,arguments)}}}),e("div",{staticClass:"slot_content"},[t._t("default")],2),t.error.type==t.error.msg==""&&t.error.msg?e("div",{staticClass:"error_label",style:{color:t.IS_I18N?"#DE5030":"warning"===t.error.type?"#FFB864":"#E05F42"}},["warning"===t.error.type||"error"===t.error.type?e("div",{staticClass:"icon"},[t.error.msg?e("WarningIcon",{attrs:{size:"14"}}):t._e()],1):t._e(),e("div",{staticClass:"error_message",domProps:{innerHTML:t._s(t.error.msg)}})]):t._e()])},a=[],o=s("9ab4"),r=s("60a3"),n=s("f3e7");let l=class extends r["g"]{constructor(){super(...arguments),this.types="input_init",this.status="input_container container_hover",this.IS_I18N=n["yb"]}errorHandler(){const t=this.error.type;"error"===t?this.status=this.IS_I18N?"container_error_i18n":"container_error":(this.status="warning"===t?this.IS_I18N?"container_warning_i18n":"container_warning":"container_hover",this.disabled?this.types="input_init container_blur":this.types="error"===t?this.IS_I18N?"input_init container_error_i18n":"input_init container_error":"warning"===t?this.IS_I18N?"input_init container_warning_i18n":"input_init container_warning":"input_init")}keydown(t){return t}input(t){return t.target.value}change(t){let e=t.target.value;return this.isTrim&&/^\s+|\s+$/.test(e)&&(e=e.trim(),this.$emit("input",e)),e}inputFocus(){"error"===this.error.type?this.types="input_init input_error":"warning"===this.error.type?this.types="input_init input_warning":this.types="input_init input_focus",this.$emit("focus")}inputBlur(){"error"===this.error.type?this.types="input_init input_error":"warning"===this.error.type?this.types="input_init input_warning":this.types="input_init"}inputDisable(){this.types="input_disabled"}focus(){const t=this.$refs.inputHandler;t.focus()}escHandler(){const t=this.$refs.inputHandler;t.blur()}};Object(o["d"])([Object(r["e"])({type:String,default:"",required:!0})],l.prototype,"value",void 0),Object(o["d"])([Object(r["e"])({type:String,default:"",required:!1})],l.prototype,"color",void 0),Object(o["d"])([Object(r["e"])({type:Boolean,default:!1,required:!1})],l.prototype,"disabled",void 0),Object(o["d"])([Object(r["e"])({type:Object,default:()=>{},required:!1})],l.prototype,"error",void 0),Object(o["d"])([Object(r["e"])({type:String,default:n["ub"].t("请输入信息"),required:!1})],l.prototype,"placeholder",void 0),Object(o["d"])([Object(r["e"])({type:String,default:"middle",required:!1})],l.prototype,"size",void 0),Object(o["d"])([Object(r["e"])({type:String,default:"text",required:!1})],l.prototype,"type",void 0),Object(o["d"])([Object(r["e"])({type:Boolean,default:!0,required:!1})],l.prototype,"isTrim",void 0),Object(o["d"])([Object(r["e"])({type:Number,default:1/0,required:!1})],l.prototype,"maxLength",void 0),Object(o["d"])([Object(r["h"])("error",{immediate:!0,deep:!0})],l.prototype,"errorHandler",null),Object(o["d"])([Object(r["b"])()],l.prototype,"keydown",null),Object(o["d"])([Object(r["b"])()],l.prototype,"input",null),Object(o["d"])([Object(r["b"])()],l.prototype,"change",null),l=Object(o["d"])([r["a"]],l);var c=l,d=c,u=(s("1d15"),s("2877")),p=Object(u["a"])(d,i,a,!1,null,"57346ff6",null);e["a"]=p.exports},"17c1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[t._m(0),e("inputPlugin",{ref:"inputhandle",attrs:{disabled:!1,placeholder:t.ops.placeholder,size:"small",error:t.errorMsg,type:t.ops.password?"password":"text"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"hide-input"},[e("input",{attrs:{type:"text"}})])}],o=s("1471"),r={name:"InputDialog",components:{inputPlugin:o["a"]},computed:{errorMsg(){return{...this.errorStr}}},props:{ops:{type:Object},errorStr:{type:Object,default:()=>({type:"",msg:""})}},data(){return{input:""}},watch:{ops(t){this.input=t.input||""}},created(){this.input=this.ops.input||""},mounted(){this.ops.focus&&this.focus()},methods:{focus(){this.$refs.inputhandle.focus()}}},n=r,l=(s("2d4c"),s("2877")),c=Object(l["a"])(n,i,a,!1,null,null,null);e["default"]=c.exports},"1be5":function(t,e,s){"use strict";s("fc7b")},"1d15":function(t,e,s){"use strict";s("0a30")},"2ce0":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[t._m(0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.oldPass.show,expression:"oldPass.show"}],staticClass:"password-container"},["checkbox"===(t.oldPass.eye?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:t.oldPass.value,expression:"oldPass.value"}],staticClass:"password-input",class:{"error-border":t.oldPass.error},attrs:{placeholder:t.$t("现在的密码"),autocomplete:"new-password","aria-autocomplete":"none",type:"checkbox"},domProps:{checked:Array.isArray(t.oldPass.value)?t._i(t.oldPass.value,null)>-1:t.oldPass.value},on:{input:function(e){return t.inputPass("oldPass")},change:function(e){var s=t.oldPass.value,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(t.oldPass,"value",s.concat([o])):r>-1&&t.$set(t.oldPass,"value",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.oldPass,"value",a)}}}):"radio"===(t.oldPass.eye?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:t.oldPass.value,expression:"oldPass.value"}],staticClass:"password-input",class:{"error-border":t.oldPass.error},attrs:{placeholder:t.$t("现在的密码"),autocomplete:"new-password","aria-autocomplete":"none",type:"radio"},domProps:{checked:t._q(t.oldPass.value,null)},on:{input:function(e){return t.inputPass("oldPass")},change:function(e){return t.$set(t.oldPass,"value",null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.oldPass.value,expression:"oldPass.value"}],staticClass:"password-input",class:{"error-border":t.oldPass.error},attrs:{placeholder:t.$t("现在的密码"),autocomplete:"new-password","aria-autocomplete":"none",type:t.oldPass.eye?"text":"password"},domProps:{value:t.oldPass.value},on:{input:[function(e){e.target.composing||t.$set(t.oldPass,"value",e.target.value)},function(e){return t.inputPass("oldPass")}]}}),t.oldPass.eye?e("i",{on:{click:function(e){t.oldPass.eye=!t.oldPass.eye}}},[e("EyeOpenedIcon",{staticClass:"eye"})],1):e("i",{on:{click:function(e){t.oldPass.eye=!t.oldPass.eye}}},[e("EyeClosedIcon",{staticClass:"eye"})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.oldPass.error,expression:"oldPass.error"}],staticClass:"error-info",class:{error:t.oldPass.error}},[e("WarningIcon",{attrs:{size:"12"}}),e("span",[t._v(t._s(t.oldPass.msg))])],1),e("div",{staticClass:"password-container"},["checkbox"===(t.newPass.eye?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:t.newPass.value,expression:"newPass.value"}],staticClass:"password-input",class:{"error-border":t.newPass.error},attrs:{placeholder:t.ops.showOldPass?t.$t("新密码至少 8 位，包含大写、小写和数字"):t.$t("密码至少 8 位，包含大写、小写和数字"),type:"checkbox"},domProps:{checked:Array.isArray(t.newPass.value)?t._i(t.newPass.value,null)>-1:t.newPass.value},on:{change:[function(e){var s=t.newPass.value,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(t.newPass,"value",s.concat([o])):r>-1&&t.$set(t.newPass,"value",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.newPass,"value",a)},function(e){return t.passChange("newPass")}],input:function(e){return t.inputPass("newPass")}}}):"radio"===(t.newPass.eye?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:t.newPass.value,expression:"newPass.value"}],staticClass:"password-input",class:{"error-border":t.newPass.error},attrs:{placeholder:t.ops.showOldPass?t.$t("新密码至少 8 位，包含大写、小写和数字"):t.$t("密码至少 8 位，包含大写、小写和数字"),type:"radio"},domProps:{checked:t._q(t.newPass.value,null)},on:{change:[function(e){return t.$set(t.newPass,"value",null)},function(e){return t.passChange("newPass")}],input:function(e){return t.inputPass("newPass")}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.newPass.value,expression:"newPass.value"}],staticClass:"password-input",class:{"error-border":t.newPass.error},attrs:{placeholder:t.ops.showOldPass?t.$t("新密码至少 8 位，包含大写、小写和数字"):t.$t("密码至少 8 位，包含大写、小写和数字"),type:t.newPass.eye?"text":"password"},domProps:{value:t.newPass.value},on:{change:function(e){return t.passChange("newPass")},input:[function(e){e.target.composing||t.$set(t.newPass,"value",e.target.value)},function(e){return t.inputPass("newPass")}]}}),t.newPass.eye?e("i",{on:{click:function(e){t.newPass.eye=!t.newPass.eye}}},[e("EyeOpenedIcon",{staticClass:"eye"})],1):e("i",{on:{click:function(e){t.newPass.eye=!t.newPass.eye}}},[e("EyeClosedIcon",{staticClass:"eye"})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.newPass.error,expression:"newPass.error"}],staticClass:"error-info",class:{error:t.newPass.error}},[e("WarningIcon",{attrs:{size:"12"}}),e("span",[t._v(t._s(t.newPass.msg))])],1),e("div",{staticClass:"password-container"},["checkbox"===(t.passwordCheck.eye?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordCheck.value,expression:"passwordCheck.value"}],staticClass:"password-input",class:{"error-border":t.passwordCheck.error},attrs:{placeholder:t.ops.showOldPass?t.$t("请再次确认新密码"):t.$t("请再次确认密码"),type:"checkbox"},domProps:{checked:Array.isArray(t.passwordCheck.value)?t._i(t.passwordCheck.value,null)>-1:t.passwordCheck.value},on:{input:function(e){return t.inputPass("passwordCheck")},change:[function(e){var s=t.passwordCheck.value,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(t.passwordCheck,"value",s.concat([o])):r>-1&&t.$set(t.passwordCheck,"value",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.passwordCheck,"value",a)},t.checkPassword]}}):"radio"===(t.passwordCheck.eye?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordCheck.value,expression:"passwordCheck.value"}],staticClass:"password-input",class:{"error-border":t.passwordCheck.error},attrs:{placeholder:t.ops.showOldPass?t.$t("请再次确认新密码"):t.$t("请再次确认密码"),type:"radio"},domProps:{checked:t._q(t.passwordCheck.value,null)},on:{input:function(e){return t.inputPass("passwordCheck")},change:[function(e){return t.$set(t.passwordCheck,"value",null)},t.checkPassword]}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordCheck.value,expression:"passwordCheck.value"}],staticClass:"password-input",class:{"error-border":t.passwordCheck.error},attrs:{placeholder:t.ops.showOldPass?t.$t("请再次确认新密码"):t.$t("请再次确认密码"),type:t.passwordCheck.eye?"text":"password"},domProps:{value:t.passwordCheck.value},on:{input:[function(e){e.target.composing||t.$set(t.passwordCheck,"value",e.target.value)},function(e){return t.inputPass("passwordCheck")}],change:t.checkPassword}}),t.passwordCheck.eye?e("i",{on:{click:function(e){t.passwordCheck.eye=!t.passwordCheck.eye}}},[e("EyeOpenedIcon",{staticClass:"eye"})],1):e("i",{on:{click:function(e){t.passwordCheck.eye=!t.passwordCheck.eye}}},[e("EyeClosedIcon",{staticClass:"eye"})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.passwordCheck.error,expression:"passwordCheck.error"}],staticClass:"error-info",class:{error:t.passwordCheck.error}},[e("WarningIcon",{attrs:{size:"12"}}),e("span",[t._v(t._s(t.passwordCheck.msg))])],1)])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"hide-input"},[e("input",{attrs:{type:"text"}})])}],o=s("f3e7"),r={name:"PasswordDialog",props:{ops:{showOldPass:Boolean}},data(){return{oldPass:{eye:!1,error:!1,msg:o["ub"].t("现在的密码不正确"),value:"",show:!0},newPass:{eye:!1,error:!1,msg:o["ub"].t("新密码至少 8 位，包含大写、小写和数字2"),value:""},passwordCheck:{eye:!1,error:!1,msg:o["ub"].t("两次密码输入不一致，请确认后重新输入"),value:""}}},watch:{ops:{handler(t){this.oldPass.show=t.showOldPass},immediate:!0,deep:!0}},methods:{check(t){"oldErr"===t?this.oldPass.error=!0:"newErr"===t&&(this.newPass.error=!0)},inputPass(t){this[t].error=!1},passChange(){const t=/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d).+$/g;(this.newPass.value.length<8||!t.test(this.newPass.value))&&(this.newPass.error=!0)},checkPassword(){this.passwordCheck.value!==this.newPass.value?this.passwordCheck.error=!0:this.passwordCheck.error=!1},checkAll(){this.passChange(),this.checkPassword()}}},n=r,l=(s("853e"),s("2877")),c=Object(l["a"])(n,i,a,!1,null,"a9cffae2",null);e["default"]=c.exports},"2d4c":function(t,e,s){"use strict";s("dc7d")},"2dbd":function(t,e,s){"use strict";s("b464")},"3dbf":function(t,e,s){},42985:function(t,e,s){"use strict";s("94ca")},"5a81":function(t,e,s){"use strict";s("3dbf")},"5d3d":function(t,e,s){},"5ea0":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"phone-dialog-wrapper"},["email"===t.accountType&&t.currentOrg&&t.currentOrg.bindOrgEmail&&"guest"!==t.currentOrg.role?e("p",{directives:[{name:"tip",rawName:"v-tip",value:{content:t.orgEmailsTooltip,placement:"top"},expression:"{ content: orgEmailsTooltip, placement: 'top' }"}],staticStyle:{"margin-bottom":"12px"}},[t._v(" "+t._s(t.$t("企业已开启邮箱域，仅允许绑定 %{slot} 后缀的邮箱",{slot:t.orgEmailsWait}))+" ")]):t._e(),e("div",{staticClass:"phone-dialog-account"},[e("inputPlugin",{ref:"inputhandle",attrs:{disabled:t.accountDisabled,placeholder:t.ops.placeholder,size:"small",error:t.accountError},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),e("div",{staticClass:"phone-dialog-code"},[e("inputPlugin",{ref:"inputCodeRef",attrs:{disabled:!1,placeholder:t.$t("验证码"),size:"small",error:t.codeError},model:{value:t.verificationCode,callback:function(e){t.verificationCode=e},expression:"verificationCode"}}),e("MButton",{attrs:{type:"secondary",size:"sm",padding:"24",width:"118"},on:{click:function(e){return t.startCutTime(!0)}}},[t._v(" "+t._s(t.process?t.$t("%{process} 秒",{process:t.process}):t.$t("获取验证码"))+" ")])],1)])},a=[],o=s("1471"),r=s("79f6c"),n=s("f3e7"),l=s("1252"),c=s("ea9b"),d=s("2ef0"),u=s("8e9f"),p={components:{inputPlugin:o["a"]},name:"phoneDialog",props:{ops:{type:Object}},data(){return{account:"",verificationCode:"",process:0,accountType:"",accountDisabled:!1,accountError:{type:"",msg:""},codeError:{type:"",msg:""},timer:null}},watch:{account(){if(this.accountError={type:"",msg:""},this.needCheckExists&&this.accountType&&this.account){const t="phone"===this.accountType?"phoneNumber":"email";this.checkAccountExists({type:t,[t]:this.account})}},verificationCode(){this.codeError={type:"",msg:""}},ops:{handler(t){this.account=t.account||"",this.accountDisabled=t.accountDisabled||!1,this.verificationCode=t.verificationCode||"",this.process=t.process||this.process,this.accountType=t.accountType||"phone",this.process=0,this.currentOrg=t.currentOrg,this.needCheckExists=t.needCheckExists||!1},deep:!0,immediate:!0}},computed:{orgEmailsTooltip(){var t;const e=u["E"]?'"':"“",s=null!==(t=this.currentOrg)&&void 0!==t?t:null;return"email"!==this.accountType||!s||s.orgEmails.length<=3?"":s.orgEmails.map(t=>`${e}${t}${e}`).join(",")},orgEmailsWait(){var t;const e=u["E"]?'"':"“",s=null!==(t=this.currentOrg)&&void 0!==t?t:null;return"email"===this.accountType&&s&&s.orgEmails.length?s.orgEmails.length>3?s.orgEmails.map(t=>`${e}${t}${e}`).slice(0,3).join(",")+"等":s.orgEmails.map(t=>`${e}${t}${e}`).join(","):""}},created(){this.account=this.ops.account||""},methods:{isEmail(){return-1!==this.account.indexOf("@")},setAccountError(){"phone"!==this.accountType?this.accountError={type:"error",msg:n["ub"].t("邮箱已经使用")}:this.accountError={type:"error",msg:n["ub"].t("手机号已经使用")}},checkAccountExists:Object(d["debounce"])((function(t){Object(c["g"])(t).then(t=>{t&&(this.accountError={type:"error",msg:"email"===this.accountType?n["ub"].t("该邮箱已被使用"):n["ub"].t("该手机号已被使用")})})}),500),checkEmailOnly(){if(!n["Qb"].EMAILREG.test(this.account))return this.accountError={type:"error",msg:n["ub"].t("请正确输入邮箱")},!1;const t=this.currentOrg;if(t&&t.bindOrgEmail&&"guest"!==t.role){const e=t.orgEmails.some(t=>this.account.endsWith(t));if(!e)return this.accountError={type:"error",msg:n["ub"].t("该邮箱后缀不符合企业要求")},!1}return!0},checkPhoneOnly(){return!!n["Qb"].PHONE_NUMBER.test(this.account)||(this.accountError={type:"error",msg:n["ub"].t("请正确输入手机号")},!1)},checkPhone(){return this.checkPhoneOnly()&&this.checkCode()},checkEmail(){return this.checkEmailOnly()&&this.checkCode()},checkCode(){return this.verificationCode?!!n["Qb"].VERIFICATION_CODE.test(this.verificationCode)||(this.codeError={type:"error",msg:n["ub"].t("验证码错误，请重新输入【错误情况】")},!1):(this.codeError={type:"error",msg:n["ub"].t("验证码错误，请重新输入【未输入情况】")},!1)},verifyCodeFailed(){this.codeError={type:"error",msg:n["ub"].t("验证码错误，请重新输入【错误情况】")}},cutTime(){clearTimeout(this.timer),this.timer=setInterval(()=>{this.process>0?this.process--:clearTimeout(this.timer)},1e3)},checkAccount(){switch(this.accountType){case"phone":return this.checkPhoneOnly();case"email":return this.checkEmailOnly();default:return!0}},async startCutTime(){if(!this.process){try{var t;if(!this.checkAccount())return;await Object(r["lf"])({identity:this.account}),null===(t=this.$refs.inputCodeRef)||void 0===t||t.focus(),this.process=60,l["b"].track("send_code",{action_position:"masterweb",action_type:this.ops.title.includes(n["ub"].t("解绑"))?"unbind":"bind",action_detail:this.isEmail()?"email":"phone",app:"masterweb"})}catch(e){const t=e.response.data;this.process=t.meta?t.meta.sec:this.process}this.cutTime()}}}},h=p,m=(s("0c87"),s("6d9d"),s("2877")),v=Object(m["a"])(h,i,a,!1,null,null,null);e["default"]=v.exports},"6d9d":function(t,e,s){"use strict";s("06ec")},"71e2":function(t,e,s){},"72b6":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",{staticClass:"apply-dialog-content"},[e(s.InputMultText,{attrs:{height:"80px",value:s.reason,placeholder:t.$t("请输入拒绝原因（非必填）"),errorStr:s.errorStr},on:{"update:value":function(t){s.reason=t}}})],1)},a=[],o=s("9ab4"),r=s("2b0e"),n=s("3035"),l=s("f3e7"),c=Object(r["defineComponent"])({__name:"rejectApplyReasonDialog",setup(t,{expose:e}){const s=Object(r["ref"])({msg:""}),i=Object(r["ref"])("");Object(r["watch"])(()=>i.value,t=>{t.length>=100?s.value.msg=l["ub"].t("最多 100 个字符"):s.value.msg=""});const a=()=>Object(o["c"])(this,void 0,void 0,(function*(){return i.value.length>=100?(s.value.msg=l["ub"].t("最多 100 个字符"),!1):(s.value.msg="",!0)})),c=()=>i.value;return e({getReason:c,checkLength:a}),{__sfc:!0,errorStr:s,reason:i,checkLength:a,getReason:c,InputMultText:n["default"]}}}),d=c,u=(s("f939"),s("2877")),p=Object(u["a"])(d,i,a,!1,null,"04567f52",null);e["default"]=p.exports},7497:function(t,e,s){},7827:function(t,e,s){"use strict";s("edcc")},8447:function(t,e,s){"use strict";s("e681")},"853e":function(t,e,s){"use strict";s("b855c")},"8e69c":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",[s.isI18N?e("master-dropdown",{attrs:{cascade:"",placement:"bottom-start",open:s.menuStatus,id:"jobDropDown"},on:{command:s.selectItem,"update:open":function(t){s.menuStatus=t}}},[e("div",{attrs:{slot:"dropButton"},slot:"dropButton"},[e("div",{staticClass:"btn--import btn--display"},[e("span",{staticClass:"btn--text--path",class:{"btn--text--placeholder":!s.showJob}},[t._v(" "+t._s(s.showJob?s.showJob:s.dropdownPlaceholder)+" ")]),e("AngleDownIcon",{attrs:{size:"14"}})],1)]),s.menuStatus?e(s.MasterMenu,{staticClass:"list",attrs:{slot:"dropMenu",hoverActived:"",width:s.menuWidth,list:s.jobList},slot:"dropMenu"}):t._e()],1):e(s.selectOther,{staticClass:"guide-input",attrs:{list:s.UserJobTranslations,error:s.jobError,placeholder:t.$t("选择你的职业"),size:"middle"},model:{value:s.job,callback:function(t){s.job=t},expression:"job"}})],1)},a=[],o=s("9ab4"),r=s("2b0e"),n=s("ea9b"),l=s("f3e7"),c=s("c6a3"),d=s("d140"),u=Object(r["defineComponent"])({__name:"selectOtherDialog",props:{ops:null},setup(t,{expose:e}){const s=t,i=Object(r["ref"])("ui"),a=Object(r["ref"])({}),u=Object(r["ref"])([]),p=Object(r["ref"])(!1),h=Object(r["ref"])(""),m="Select your job",v=()=>Object(o["c"])(this,void 0,void 0,(function*(){if(!l["yb"])return;const t=yield Object(n["i"])();u.value=t.data.jobs.map(t=>(t.id===i.value&&(h.value=t.title),{value:t.id,label:t.title}))})),f=Object(r["computed"])(()=>{const t=document.getElementById("jobDropDown");return t?t.clientWidth+"px":"0px"}),b=t=>{i.value=t.value,h.value=t.label,p.value=!1};return Object(r["watch"])(()=>s.ops,t=>{i.value=t.job||""},{immediate:!0,deep:!0}),Object(r["onMounted"])(()=>{v()}),e({job:i}),{__sfc:!0,props:s,job:i,jobError:a,jobList:u,menuStatus:p,showJob:h,dropdownPlaceholder:m,fetchJobs:v,menuWidth:f,selectItem:b,UserJobTranslations:l["N"],isI18N:l["yb"],selectOther:c["a"],MasterMenu:d["o"]}}}),p=u,h=(s("7827"),s("2877")),m=Object(h["a"])(p,i,a,!1,null,"9a926c08",null);e["default"]=m.exports},"94ca":function(t,e,s){},"96ea":function(t,e,s){},a3d0:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",{staticClass:"cross-validation-dialog__content"},[e("ul",{staticClass:"tab",on:{click:s.onSwitchTab}},t._l(s.tabItems,(function(i){return e("li",{key:i.type,staticClass:"tab__item",class:{active:s.currentTab===i.type,"disable-selected":i.disabled},attrs:{"data-type":i.type,"data-disabled":i.disabled?"1":"0"}},[e("span",{directives:[{name:"tip",rawName:"v-tip",value:{content:i.disabled?`<div style='padding: 3px 0;'>${i.tooltip}</div>`:"",placement:"bottom",trigger:"hover",offsetY:"4px",delay:1e3},expression:"{\n          content: tabItem.disabled ? `<div style='padding: 3px 0;'>${tabItem.tooltip}</div>` : '',\n          placement: 'bottom',\n          trigger: 'hover',\n          offsetY: '4px',\n          delay: 1000,\n        }"}],attrs:{"data-type":i.type,"data-disabled":i.disabled?"1":"0"}},[t._v(" "+t._s(i.label)+" ")])])})),0),e("form",{staticClass:"form",on:{submit:function(t){t.preventDefault()}}},["password"!==s.currentTab?e("div",{staticClass:"email-phone"},[e("div",{staticClass:"form-row__normal"},[e(s.inputPlugin,{attrs:{disabled:!0,error:s.formData.accountError,size:"small"},model:{value:s.formData.account,callback:function(e){t.$set(s.formData,"account",e)},expression:"formData.account"}})],1),e("div",{staticClass:"form-row__code"},[e(s.inputPlugin,{ref:"inputCodeRef",staticStyle:{flex:"1"},attrs:{placeholder:t.$t("请输入验证码"),error:s.formData.codeError,size:"small"},model:{value:s.formData.code,callback:function(e){t.$set(s.formData,"code",e)},expression:"formData.code"}}),e("MButton",{attrs:{type:"secondary",size:"sm",padding:"24",width:"118"},on:{click:function(t){return t.stopPropagation(),s.startCutTime.apply(null,arguments)}}},[t._v(" "+t._s(s.processes[s.currentTab].value?`${s.processes[s.currentTab].value} ${t.$t("秒")}`:t.$t("获取验证码"))+" ")])],1)]):e("div",{staticClass:"password"},[e(s.inputPlugin,{ref:"inputCodeRef",attrs:{type:s.passwordFormData.eye?"text":"password",placeholder:t.$t("请输入当前的密码"),error:s.passwordFormData.passwordError,size:"small"},on:{click:s.switchEye},model:{value:s.passwordFormData.password,callback:function(e){t.$set(s.passwordFormData,"password",e)},expression:"passwordFormData.password"}}),e("div",{staticClass:"right-eye",on:{click:s.switchEye}},[s.passwordFormData.eye?e("EyeOpenedIcon",{attrs:{size:"16"}}):e("EyeClosedIcon",{attrs:{size:"16"},on:{click:s.switchEye}})],1)],1)])])},a=[],o=s("9ab4"),r=s("2b0e"),n=s("f3e7"),l=s("1471"),c=s("79f6c"),d=s("4d9c"),u=s("034a"),p=Object(r["defineComponent"])({__name:"crossValidationDialog",props:{ops:null},setup(t,{expose:e}){const s=t,i=Object(u["b"])(),a=Object(r["computed"])(()=>i.userInfo),p=Object(r["computed"])(()=>{const{email:t,phoneNumber:e,userState:s}=a.value;return[{label:n["ub"].t("邮箱验证"),type:"email",disabled:!t,tooltip:n["ub"].t("此账号未绑定邮箱，请选择其他方式")},{label:n["ub"].t("手机验证"),type:"phone",disabled:!e,tooltip:n["ub"].t("此账号未绑定手机号，请选择其他方式")},{label:n["ub"].t("密码验证"),type:"password",disabled:!s,tooltip:n["ub"].t("此账号未设置密码，请选择其他方式")}]}),h=Object(r["ref"])(s.ops.openTab),m=t=>{var e,s;const i=t.target,a=null!==(e=null===i||void 0===i?void 0:i.dataset.type)&&void 0!==e?e:"",o=null!==(s=null===i||void 0===i?void 0:i.dataset.disabled)&&void 0!==s?s:"0";a&&a!==h.value&&"1"!==o&&(h.value=a)},v=Object(r["ref"])({account:"email"===h.value?a.value.email:a.value.phoneNumber,code:"",accountError:{type:"",msg:""},codeError:{type:"",msg:""}}),f=Object(r["ref"])({password:"",eye:!1,passwordError:{type:"",msg:""}}),b=()=>{f.value.eye=!f.value.eye},g=()=>{v.value={account:"email"===h.value?a.value.email:a.value.phoneNumber,code:"",accountError:{type:"",msg:""},codeError:{type:"",msg:""}},f.value={password:"",eye:!1,passwordError:{type:"",msg:""}}};Object(r["watch"])(h,()=>{g()}),Object(r["watch"])(()=>v.value.account,()=>{v.value.accountError={type:"",msg:""}}),Object(r["watch"])(()=>v.value.code,()=>{v.value.codeError={type:"",msg:""}}),Object(r["watch"])(()=>f.value.password,()=>{f.value.passwordError={type:"",msg:""}});const y=Object(r["ref"])({email:{timer:null,value:0},phone:{timer:null,value:0}}),_=()=>{const t=h.value;clearTimeout(y.value[t].timer),y.value[t].timer=setInterval(()=>{y.value[t].value>0?y.value[t].value--:(clearTimeout(y.value[t].timer),y.value[t].timer=null)},1e3)},w=Object(r["ref"])(),C=()=>Object(o["c"])(this,void 0,void 0,(function*(){var t;if(!y.value[h.value].value){try{yield Object(c["lf"])({identity:v.value.account}),null===(t=w.value)||void 0===t||t.focus(),y.value[h.value].value=60}catch(e){const t=e.response.data;y.value[h.value].value=t.meta?t.meta.sec:y.value[h.value].value}_()}})),O=()=>Object(o["c"])(this,void 0,void 0,(function*(){var t;if(!v.value.code)return v.value.codeError={type:"error",msg:n["ub"].t("验证码错误，请重新输入【错误情况】")},!1;const e="email"===h.value?{type:"email",code:v.value.code,email:v.value.account}:{type:"phoneNumber",code:v.value.code,phoneNumber:v.value.account};try{yield Object(c["B"])(e)}catch(s){const e=null===(t=null===s||void 0===s?void 0:s.response)||void 0===t?void 0:t.data.code;if("InvalidVerifyCode"===e||"UserInfoNotChecked"===e)return v.value.codeError={type:"error",msg:n["ub"].t("验证码错误，请重新输入【错误情况】")},!1;if(-1!==e.indexOf("IsExists"))return"phone"===h.value?(v.value.accountError={type:"error",msg:n["ub"].t("手机号已经使用")},!1):(v.value.accountError={type:"error",msg:n["ub"].t("邮箱已经使用")},!1)}return!0})),j=()=>Object(o["c"])(this,void 0,void 0,(function*(){try{yield Object(c["C"])({password:f.value.password})}catch(t){return f.value.passwordError={type:"error",msg:n["ub"].t("输入的密码有误，请确认后重新输入")},!1}return!0})),k=t=>()=>Object(o["c"])(this,void 0,void 0,(function*(){const e=t();try{const t=yield Object(c["tg"])(e);i.setUserInfo(t.data)}catch(s){return $(s),!1}return!0})),x=k(()=>{const t={type:"unBindEmail"===s.ops.changeType?"email":"phoneNumber",code:v.value.code,authentication:h.value};return"phone"===t.authentication?(t.authentication="phoneNumber",t.phoneNumber=v.value.account):t.email=v.value.account,t}),P=k(()=>{const t={type:"unBindEmail"===s.ops.changeType?"email":"phoneNumber",authentication:h.value,password:f.value.password};return t}),I={email:O,phone:O,password:j},T=()=>Object(o["c"])(this,void 0,void 0,(function*(){if("unBindEmail"===s.ops.changeType||"unBindPhone"===s.ops.changeType){let t=!1;return t="password"!==h.value?yield x():yield P(),t&&Object(d["b"])({content:n["ub"].t("解绑成功"),timeout:3e3,position:"bottom"}),{status:t}}const t=I[h.value],e=yield t();return{status:e,authentication:"phone"===h.value?"phoneNumber":h.value}})),E={InvalidEmailError:()=>{},EmailIsExists:()=>{},PhoneNumberIsExists:()=>{},UserInfoNotChecked:()=>{},InvalidVerifyCode:()=>{v.value.codeError={type:"error",msg:n["ub"].t("验证码错误，请重新输入【错误情况】")}},PasswordError:()=>{f.value.passwordError={type:"error",msg:n["ub"].t("输入的密码有误，请确认后重新输入")}}},$=t=>{var e;const s=null===(e=null===t||void 0===t?void 0:t.response)||void 0===e?void 0:e.data.code;E[s]&&E[s]()};return e({nextStep:T}),{__sfc:!0,mainStore:i,userInfo:a,props:s,tabItems:p,currentTab:h,onSwitchTab:m,formData:v,passwordFormData:f,switchEye:b,initData:g,processes:y,cutTime:_,inputCodeRef:w,startCutTime:C,checkCode:O,checkPassword:j,unBindBaseFactory:k,unBindByEmailOrPhone:x,unBindByPassword:P,checkFnMap:I,nextStep:T,errorCode:E,handleError:$,inputPlugin:l["a"]}}}),h=p,m=(s("b9f0"),s("2877")),v=Object(m["a"])(h,i,a,!1,null,"4b2b8278",null);e["default"]=v.exports},a5c5:function(t,e,s){"use strict";s("7497")},af02:function(t,e,s){},b464:function(t,e,s){},b7a8:function(t,e,s){},b855c:function(t,e,s){},b9f0:function(t,e,s){"use strict";s("5d3d")},bcf3:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var i=s("9ab4"),a=s("2b0e"),o=s("be92"),r=s("79f6c");const n={teamFontList:[],teamFontMap:{}},l=(t,e)=>{const s=t.split("."),i=e.split("."),a=Math.max(s.length,i.length);for(let o=0;o<a;o++){const t=Number(s[o])||0,e=Number(i[o])||0;if(t>e)return 1;if(t<e)return-1}return s.length===i.length?0:s.length>i.length?1:-1},c=Object(o["c"])("teamFont",{state:()=>n,actions:{getTeamFontList(t){return Object(i["c"])(this,void 0,void 0,(function*(){this.teamFontList=[],this.teamFontMap={};const{data:e}=yield Object(r["Dd"])(t),s={},i=yield Object(r["yb"])({value:e,key:"coverUrl"}),a=yield Object(r["yb"])({value:e,key:"originUrl"}),o=yield Object(r["yb"])({value:e,key:"url"});e.forEach(t=>{t.family.startsWith(".")||(s[t.family]||(s[t.family]={fonts:[],version:t.version,isMultiVersion:!1,family:t.family,coverUrl:Object(r["Gf"])(t.coverUrl,i),localizedFamily:t.localizedFamily,type:t.type}),t.version!==s[t.family].version&&(s[t.family].isMultiVersion=!0,s[t.family].version=l(s[t.family].version,t.version)>0?s[t.family].version:t.version),t.coverUrl=Object(r["Gf"])(t.coverUrl,i),t.url=Object(r["Hf"])(t.url,o),t.originUrl=t.originUrl&&Object(r["Hf"])(t.originUrl,a),"organization"===t.type&&"organization"!==s[t.family].type&&(s[t.family].type=t.type),s[t.family].fonts.push(t))});for(const t of Object.keys(s))s[t].fonts.sort((t,e)=>t.weight>e.weight?1:-1);this.teamFontList=Object.values(s),this.teamFontMap=s}))},deleteTeamFont({index:t,family:e}){return Object(i["c"])(this,void 0,void 0,(function*(){const s=this.teamFontMap[e].fonts[t];yield Object(r["X"])([s.id]),this.teamFontMap[e].fonts.splice(t,1),0===this.teamFontMap[e].fonts.length&&(a["default"].delete(this.teamFontMap,e),this.teamFontList=Object.values(this.teamFontMap))}))},deleteAllTeamFont(t){return Object(i["c"])(this,void 0,void 0,(function*(){const e=this.teamFontMap[t].fonts;yield Object(r["X"])(e.map(t=>t.id)),this.teamFontMap[t].fonts.splice(0),a["default"].delete(this.teamFontMap,t),this.teamFontList=Object.values(this.teamFontMap)}))}}})},bdf5b:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return t.itemData?e("div",{staticClass:"m-new-func"},[e("div",{staticClass:"m-new-func__close m-popup__close-icon",class:t.itemData.blackClose?"close-black":"",on:{click:t.closeDialog}},[e("CloseIcon",{staticClass:"m-new-func__close-icon"})],1),t.isVideo?e("video",{staticClass:"m-new-func__video",attrs:{autoplay:"",muted:"",loop:""},domProps:{muted:!0}},[e("source",{attrs:{type:"video/mp4",src:t.itemData.image}})]):t._e(),t.itemData.image&&!t.isVideo?e("img",{staticClass:"m-new-func__img",attrs:{src:t.itemData.image},on:{load:t.gifLoaded}}):t._e(),e("div",{staticClass:"m-new-func__head"},[e("div",{staticClass:"m-new-func__title h1"},[t._v(t._s(t.itemData.name))]),t.ops.fuseList.length>1?e("div",{staticClass:"m-new-func__steps p2"},[t._v(" "+t._s(t.activeIndex+1)+"/"+t._s(t.ops.fuseList.length)+" ")]):t._e()]),e("div",{staticClass:"m-new-func__content p4",domProps:{innerHTML:t._s(t.itemData.description)}}),e("div",{staticClass:"m-new-func__buttons"},[e("MButton",{directives:[{name:"show",rawName:"v-show",value:t.activeIndex,expression:"activeIndex"}],staticClass:"m-new-func__buttons-last",attrs:{type:"secondary",size:"md",padding:"24"},on:{click:function(e){t.activeIndex--}}},[t._v(" "+t._s(t.$t("上一页"))+" ")]),e("MButton",{attrs:{size:"md",padding:"24"},on:{click:t.handleNext}},[t._v(" "+t._s(t.ops.fuseList.length-1===t.activeIndex?t.$t("我知道啦"):t.$t("下一页"))+" ")])],1)]):t._e()},a=[],o=s("9ab4"),r=s("60a3"),n=s("1252");let l=class extends r["g"]{constructor(){super(...arguments),this.activeIndex=0}get item(){return this.ops.fuseList[this.activeIndex]}get itemData(){var t,e;return null===(e=null===(t=this.item)||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.data}get isVideo(){var t,e;return(null!==(e=null===(t=this.itemData)||void 0===t?void 0:t.image)&&void 0!==e?e:"").endsWith("mp4")}handleDataChange(){this.itemData?(this.sendSensors(!0),this.clearGifTimer()):this.$emit("send")}handleNext(){this.activeIndex<this.ops.fuseList.length-1?this.activeIndex++:this.$emit("send")}clearGifTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}sendSensors(t=!0){var e;n["b"].track("whats_new_popup_load",{action_position:"fileshome",action_type:t?"show":"done",action_detail:(null===(e=this.item)||void 0===e?void 0:e.name)||""})}gifLoaded(){var t;this.timer=setTimeout(()=>{this.sendSensors(!1),this.timer=null},(null===(t=this.itemData)||void 0===t?void 0:t.gifTime)||1e3)}closeDialog(){this.$emit("send",!0)}beforeDestroy(){this.clearGifTimer()}};Object(o["d"])([Object(r["e"])({type:Boolean})],l.prototype,"visible",void 0),Object(o["d"])([Object(r["e"])({type:Object,default:()=>({})})],l.prototype,"ops",void 0),Object(o["d"])([Object(r["h"])("itemData")],l.prototype,"handleDataChange",null),l=Object(o["d"])([Object(r["a"])({})],l);var c=l,d=c,u=(s("d75a"),s("2877")),p=Object(u["a"])(d,i,a,!1,null,"7a97107b",null);e["default"]=p.exports},bfe4:function(t,e,s){"use strict";s("d559")},c639:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{ref:"defaultLib",staticClass:"default-lib"},[e("div",{staticClass:"default-lib__top"},[e("div",{staticClass:"default-lib__top__title"},[e("div",[t._v(t._s(t.ops.title))]),e("div",{staticClass:"default-lib__top__desc"},[t._v(t._s(t.ops.titleDesc))])])]),e("div",{staticClass:"default-lib__line"}),e("div",{staticClass:"default-lib__middle"},[e("div",{staticClass:"default-lib__content"},[e("div",{staticClass:"default-lib__team"},[t._v(t._s(t.ops.teamName))]),t._l(t.defaultTeamLibraryList,(function(s,i){return e("span",{key:s.id},[e("div",{staticClass:"default-lib__item",style:{paddingTop:i?"18px":"12px"},on:{mouseenter:function(e){return t.handleOpenFileFlag("enter",s)},mouseleave:function(e){return t.handleOpenFileFlag("leave",s)}}},[e("div",{staticClass:"default-lib__name h5 truncate",attrs:{"aria-label":""}},[t._v(" "+t._s(s.fileName)+" "),e("aside",{staticClass:"p6 truncate",attrs:{"aria-label":""}},[t._v(" "+t._s(s.description||t.$t("最近更新于%{slot1}",{slot1:s.updateDate}))+" ")])]),s.id===t.openFileFlag?e("MasterButtonIcon",{directives:[{name:"tip",rawName:"v-tip.bottom",value:t.$t("打开文件"),expression:"$t('打开文件')",modifiers:{bottom:!0}}],key:"openfile",staticClass:"default-lib__openfile",attrs:{icon:"ShareIcon"},on:{click:function(e){return t.handleOpenFile(s)}}}):t._e(),e("Toggle",{attrs:{defaultOpen:s.isSubscribe},on:{change:function(e){return t.subscribe(s.id,e)}}})],1)])}))],2)])])},a=[],o=s("9ab4"),r=s("60a3"),n=s("be92"),l=s("dcf6"),c=s("6b98"),d=s("a464");let u=class extends r["g"]{constructor(){super(...arguments),this.openFileFlag=-1,this.subscribeList=[]}handleOpenFileFlag(t,e){this.openFileFlag="enter"===t?e.id:-1}handleOpenFile(t){Object(c["b"])("/file/"+t.fileKey)}subscribe(t,e){const s=this.subscribeList.findIndex(e=>e.id===t);if(-1!==s)this.subscribeList[s].state=e?1:2;else{const s={id:t,state:e?1:2};this.subscribeList.push(s)}}created(){Object(d["a"])().getDefaultTeamLibraryList({teamId:this.ops.teamId})}};Object(o["d"])([Object(r["e"])({type:Object,required:!0})],u.prototype,"ops",void 0),u=Object(o["d"])([Object(r["a"])({components:{Toggle:l["a"]},computed:Object.assign({},Object(n["e"])(d["a"],["defaultTeamLibraryList"]))})],u);var p=u,h=p,m=(s("f553"),s("2877")),v=Object(m["a"])(h,i,a,!1,null,"70b9b459",null);e["default"]=v.exports},c658:function(t,e,s){},c6a3:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",{staticClass:"container"},[e("div",{class:["form-select-"+t.size,s.dropStatus?"drop":""]},[e("div",{staticClass:"select_drop",on:{click:function(t){t.stopPropagation(),s.dropStatus=!s.dropStatus}}},[e("input",{ref:"selectHandler",class:s.type,attrs:{placeholder:t.placeholder,type:"text",disabled:"true"},domProps:{value:s.displayJobName},on:{input:s.onInput}}),e("div",{staticClass:"drop_icon flex-c"},[e("AngleDownIcon",{staticClass:"transition",style:{transform:s.dropStatus?"rotate(180deg)":"rotate(0)"},attrs:{size:"24"}})],1)]),e(s.CollapseTransition,[e("ul",{directives:[{name:"show",rawName:"v-show",value:s.dropStatus,expression:"dropStatus"}],staticClass:"options_container",style:{height:t.height+"px"}},t._l(t.list,(function(i,a){return e("li",{key:a,staticClass:"option_item h3",on:{click:function(t){return t.stopPropagation(),s.changeValue(a)}}},[t._v(" "+t._s(i)+" ")])})),0)])],1),0!=Object.keys(t.error).length?e("div",{staticClass:"error_label"},[e("div",{staticClass:"icon"},[e("WarningIcon",{attrs:{size:"12"}})],1),e("div",{staticClass:"error_message"},[t._v(t._s(t.error.msg))])]):t._e()])},a=[],o=s("2b0e"),r=s("7c76"),n=s("f3e7"),l=Object(o["defineComponent"])({__name:"SelectOther",props:{value:{default:""},disabled:{type:Boolean,default:!1},error:{default:{}},placeholder:{default:n["ub"].t("请选择信息")},list:null,size:{default:"middle"},height:{default:54}},emits:["input"],setup(t,{emit:e}){const s=t,i=Object(o["ref"])("input_init"),a=Object(o["ref"])("input_container container_hover"),n=Object(o["ref"])(!1),l=Object(o["ref"])(""),c=Object(o["ref"])(null);function d(){return e("input",l.value),l.value}Object(o["watch"])(s.error,t=>{0!==Object.keys(t).length?a.value="input_container container_error":(a.value="input_container container_hover",s.disabled?i.value="input_init container_blur":i.value="input_init container_hover")},{immediate:!0,deep:!0});const u=Object(o["computed"])(()=>{var t;return null!==(t=s.list&&s.list[s.value])&&void 0!==t?t:""});function p(t){l.value=t;const e=document.createEvent("HTMLEvents");e.initEvent("input",!1,!1),c.value&&c.value.dispatchEvent(e),n.value=!1}function h(){n.value=!1}return Object(o["onMounted"])(()=>{document.body.addEventListener("click",h)}),Object(o["onBeforeUnmount"])(()=>{document.body.removeEventListener("click",h)}),{__sfc:!0,type:i,status:a,dropStatus:n,valueTemp:l,selectHandler:c,props:s,emits:e,onInput:d,displayJobName:u,changeValue:p,cancalShow:h,CollapseTransition:r["a"]}}}),c=l,d=(s("2dbd"),s("2877")),u=Object(d["a"])(c,i,a,!1,null,"fa20477a",null);e["a"]=u.exports},cd34:function(t,e,s){"use strict";s("af02")},d483:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"activity"},[e("button",{staticClass:"activity__close",on:{click:t.handleClose}},[e("CloseIcon")],1),e("div",{staticClass:"activity__poster",style:{background:`url(${t.info.bgImg}) no-repeat center #111111`,backgroundSize:"contain"}},[e("div",{staticClass:"qrcode"},[e("div",{staticClass:"qrcode__imgWrap"},[e("QrcodeVue",{staticClass:"qrcode__imgWrap--img",attrs:{value:t.promoteUrl,size:t.qrConfig.size,level:"H"}})],1)])]),e("div",{staticClass:"activity__textWrap"},[e("p",{staticClass:"sub-title"},[t._v(t._s(t.info.subTitle))])]),e("div",{staticClass:"footer"},[e("MButton",{attrs:{size:"md",padding:"24"},on:{click:t.handleViewReport}},[t._v(t._s(t.$t("立即查看")))])],1)])},a=[],o=s("9ab4"),r=s("60a3"),n=s("f182b"),l=s("c3bc"),c=s("1252"),d=s("f3e7");let u=class extends r["g"]{constructor(){super(...arguments),this.token="",this.qrConfig={size:78}}created(){const{ops:{attribute:t}}=this;this.info=t.data}mounted(){c["b"].track("report_popup")}get promoteUrl(){const t={utm_source:"annual_report",utm_medium:"workbench"},e=Object(l["g"])(this.info.qrLandPage,t);return e}handleClose(){this.$parent&&this.$parent.handleClose()}handleViewReport(){Object(n["jc"])(this.promoteUrl)}};Object(o["d"])([Object(r["e"])({type:Boolean})],u.prototype,"visible",void 0),Object(o["d"])([Object(r["e"])({type:Object,default:{}})],u.prototype,"ops",void 0),u=Object(o["d"])([Object(r["a"])({components:{QrcodeVue:d["Lb"]}})],u);var p=u,h=p,m=(s("42985"),s("2877")),v=Object(m["a"])(h,i,a,!1,null,"45778f35",null);e["default"]=v.exports},d559:function(t,e,s){},d590:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return t.taskLength?e("div",{staticClass:"m-import"},[e("div",{staticClass:"m-import__title h5"},[t._v(t._s(t.$t("同步数据"))+" "+t._s(t.successCount)+"/"+t._s(t.taskLength))]),e("div",{staticClass:"m-import__text p5"},[t._v(t._s(t.$t("正在将以下"))+" "+t._s(t.taskLength)+" "+t._s(t.$t("个团队迁移至企业版")))]),e("div",{staticClass:"m-import__list"},t._l(t.taskList,(function(s,i){return e("div",{key:i,staticClass:"m-import__list-item"},[e("div",{staticClass:"m-import__list-item-left"},[e("div",{staticClass:"m-import__list-item-left-top"},[e("div",{staticClass:"m-import__list-item-icon"},[1===s.status?[e("CheckSolidIcon",{staticClass:"m-import__list-item-icon-success",attrs:{size:"14"}})]:2===s.status?[e("WarningIcon",{staticClass:"m-import__list-item-icon-warning",attrs:{size:"14"}})]:[e("LoadingIcon",{staticClass:"m-import__list-item-icon-loading",attrs:{size:"14"}})]],2),e("div",{staticClass:"m-import__list-item-text h4"},[t._v(t._s(t.teamInfo[i].name))])]),2===s.status?e("div",{staticClass:"m-import__list-item-left-bottom"},[e("div",{staticClass:"m-import__list-item-icon"}),e("div",{staticClass:"m-import__list-item-text m-import__list-item-text-error h4"},[t._v(" "+t._s(t.$t("数据写入失败，请重试"))+" ")])]):t._e()]),e("div",{staticClass:"m-import__list-item-right"},[e("UpdateIcon",{directives:[{name:"show",rawName:"v-show",value:2===s.status,expression:"info.status === 2"}],attrs:{size:"16"},nativeOn:{click:function(e){return t.retry(s)}}})],1)])})),0),e("div",{staticClass:"m-import__button"},[e("button",{class:["mas-button mas-button-middle",t.finished?"mas-button-highlight":"mas-button-secondary mas-button-disabled"],attrs:{disabled:!t.finished},on:{click:t.closeDialog}},[t._v(" "+t._s(t.finished?t.$t("完成【完成】"):t.$t("迁移中..."))+" ")])])]):t._e()},a=[],o=s("9ab4"),r=s("60a3"),n=s("79f6c"),l=s("be92"),c=s("e351"),d=s("740d"),u=s("034a"),p=s("f3e7");let h=class extends r["g"]{constructor(){super(...arguments),this.taskList={}}get taskId(){var t;return(null===(t=this.ops)||void 0===t?void 0:t.taskId)||0}get teamInfo(){var t;return(null===(t=this.ops)||void 0===t?void 0:t.teamObj)||{}}get taskLength(){return Object.keys(this.taskList).length}get successCount(){return Object.keys(this.taskList).filter(t=>1===this.taskList[t].status).length}get finished(){return Object.keys(this.taskList).every(t=>0!==this.taskList[t].status)}getTaskStatus(){this.clearTimer();const t=Object(n["Ld"])(this.taskId);return t.then(t=>{this.taskList=t.data.details,this.finished&&(Object(u["b"])().refreshList(),this.clearTimer())}).catch(()=>{}),this.getTaskTimer=setTimeout(()=>{this.getTaskTimer=null,this.getTaskStatus()},1e3),t}retry(t){var e,s;return Object(o["c"])(this,void 0,void 0,(function*(){if(!this.retrying){this.retrying=!0;try{yield Object(n["Mf"])({organizationId:this.currentOrgId,taskId:this.taskId,teamId:[t.team_id]}),yield this.getTaskStatus()}catch(i){const t=null===(s=null===(e=null===i||void 0===i?void 0:i.response)||void 0===e?void 0:e.data)||void 0===s?void 0:s.code;if("ServiceDisable"===t)return void d["b"].show(p["ub"].t("企业服务已到期，该功能暂不可用"));d["b"].show(p["ub"].t("重试失败，请稍后再试"))}finally{this.retrying=!1}}}))}clearTimer(){this.getTaskTimer&&(clearTimeout(this.getTaskTimer),this.getTaskTimer=null)}closeDialog(){this.clearTimer(),this.$emit("send")}beforeDestroy(){this.clearTimer()}created(){this.getTaskStatus()}};Object(o["d"])([Object(r["e"])({type:Object,required:!0})],h.prototype,"ops",void 0),h=Object(o["d"])([Object(r["a"])({computed:Object.assign({},Object(l["e"])(c["b"],{currentOrgId:t=>t.currentOrgId}))})],h);var m=h,v=m,f=(s("1be5"),s("2877")),b=Object(f["a"])(v,i,a,!1,null,"6bfedee4",null);e["default"]=b.exports},d75a:function(t,e,s){"use strict";s("96ea")},dc7d:function(t,e,s){},e681:function(t,e,s){},e71f:function(t,e,s){},ec7e:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"student-container"},[e("div",{class:["student-container-input",t.dropStatus?"drop":""]},[e("inputPlugin",{ref:"inputhandle",attrs:{disabled:!1,placeholder:t.ops.placeholder,size:"middle",error:t.errorMsg,type:t.ops.password?"password":"text"},on:{input:t.handleInput,focus:function(e){return t.handleInput(t.schoolName)}},model:{value:t.schoolName,callback:function(e){t.schoolName="string"===typeof e?e.trim():e},expression:"schoolName"}}),e("collapse-transition",[e("ul",{directives:[{name:"show",rawName:"v-show",value:t.dropStatus,expression:"dropStatus"}],staticClass:"student-options"},t._l(t.res,(function(s){return e("li",{key:s.schoolID,staticClass:"student-options-item h4",on:{click:function(e){return e.stopPropagation(),t.changeValue(s)}}},[t._v(" "+t._s(s.schoolName)+" ")])})),0)])],1),e("div",{staticClass:"student-upload"},[e("div",{staticClass:"student-upload-dashed transition",class:[t.overDashedBox&&"active"],on:{click:t.imgClickHandler,dragover:t.imgDragoverHandler,dragenter:t.imgDragenterHandler,drop:t.imgDropoverHandler,mouseenter:t.mouseenterHandler,mouseleave:t.mouseleaveHandler}},[e("div",{staticClass:"student-upload-img"},[t.hasImg?e("img",{ref:"imgAttrs",attrs:{src:t.dataUrl}}):e("div",{staticClass:"student-upload-hint"},[e("div",{staticClass:"student-upload-hint__icon"},[e("svg-plugin",{staticClass:"plus",attrs:{name:"plus"}})],1),e("div",{staticClass:"student-upload-hint-text transition"},[t._v(" "+t._s(t.$t("选择或拖拽"))+" "),e("span",[t._v(t._s(t.$t("学生证内页照片")))]),t._v(" "+t._s(t.$t("到此处"))+" ")])])]),t.imgLoadingStatus?e("div",{staticClass:"student-upload-loading"},[e("div",{staticClass:"student-upload-loading__context"},[e("loadingIcon",{attrs:{size:"24",fill:t.uploadingFill}}),e("div",{staticClass:"text"},[t._v(t._s(t.$t("正在上传")))])],1)]):t._e(),t.hasImg&&!t.dropStatus?e("div",{staticClass:"student-upload-dashed-cover",class:[t.showCover&&!t.dropStatus?"show":"hide"]},[e("div",{staticClass:"student-upload-dashed-cover-context"},[e("div",{staticClass:"student-upload-hint__icon"},[e("svg-plugin",{staticClass:"plus",attrs:{name:"plus"}})],1),e("div",{staticClass:"student-upload-hint-text white transition"},[t._v(t._s(t.$t("点击或拖拽重新上传")))])])]):t._e()])])])},a=[],o=s("f3e7"),r=s("1471"),n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("LoadingIcon",{staticClass:"loading-rotate-icon",attrs:{fill:t.fill,rotate:t.rotate,size:t.size}})},l=[],c=s("9ab4"),d=s("60a3");let u=class extends d["g"]{};Object(c["d"])([Object(d["e"])({default:"none",type:String})],u.prototype,"fill",void 0),Object(c["d"])([Object(d["e"])({default:"0",type:String})],u.prototype,"rotate",void 0),Object(c["d"])([Object(d["e"])({default:"inherit",type:String})],u.prototype,"size",void 0),u=Object(c["d"])([d["a"]],u);var p=u,h=p,m=(s("8447"),s("2877")),v=Object(m["a"])(h,n,l,!1,null,"1de67126",null),f=v.exports,b=s("79f6c"),g=s("051d"),y=s("740d"),_=s("f182b"),w=s("7c76"),C=s("3e1f"),O={name:"studentVerificationDialog",components:{inputPlugin:r["a"],loadingIcon:f,CollapseTransition:w["a"]},props:{ops:{type:Object}},data(){return{schoolName:"",school:[],res:[],schoolID:"",dropStatus:!1,overDashedBox:!1,hasImg:!1,showCover:!0,studentUrl:"",errorMsg:{type:"",msg:""},dataUrl:"",imgLoadingStatus:!1}},watch:{ops(t){this.schoolName=t.schoolName||"",this.schoolID=t.schoolID||"",this.studentUrl=t.certificationUrl||""},schoolName(t){this.updateDiaBtnStatus(t,this.studentUrl)},studentUrl(t){this.updateDiaBtnStatus(this.schoolName,t)}},computed:{uploadingFill(){return useMainStore().isDark?"#FFFFFF":"#8F8F8F"}},created(){this.initStudentInfo(),this.initSchool()},methods:{async initSchool(){const t=await Object(b["ud"])("schoolInfo");t?this.school=t:y["b"].show(o["ub"].t("高校数据获取失败，请刷新重试"))},initStudentInfo(){const{ops:{schoolName:t="",schoolID:e="",certificationUrl:s=""}}=this;this.schoolName=t,this.schoolID=e,this.studentUrl=s},handleInput(t=""){""===t&&(this.res=[]),this.res=this.fiteredSchool(t),this.dropStatus=this.res.length>0},fiteredSchool(t){const e=[],s=[];if(""===t)return e;for(let i=0;i<this.school.length;i++){if(e.length&&e.length>=3)break;const a=Object.keys(this.school[i])[0],o=Object.values(this.school[i])[0],r=a.indexOf(t);0===r?e.push({schoolName:a,schoolID:o}):a.includes(t)&&s.push({schoolName:a,schoolID:o})}while(e.length<3&&s.length)e.push(s.shift());return e},hasSchool(t){if(""===t)return!1;for(let e=0;e<this.school.length;e++){const s=Object.keys(this.school[e])[0];if(s===t)return!0}return!1},changeValue(t){this.schoolName=t.schoolName,this.schoolID=t.schoolID,this.res=[],this.dropStatus=!1},uploadImg(t){this.imgLoadingStatus=!0,g["a"].uploadStudentFile(t).then(async e=>{this.dataUrl=await Object(_["qc"])(t),e?(this.hasImg=!0,this.studentUrl=e):y["b"].show(o["ub"].t("上传图片失败，请重新上传"))}).finally(()=>{this.imgLoadingStatus=!1})},imgClickHandler(){if(this.dropStatus)return;const t=new g["b"]({filters:{mimeTypes:".jpg,.png,.jpeg",maxFileSize:"2048kb"}});t.onFilesAdded=t=>{Object(_["Nb"])(t[0].type)||y["b"].show(o["ub"].t("上传图片失败")),this.uploadImg(t[0])}},imgDragenterHandler(){this.overDashedBox=!0},imgDragoverHandler(t){t.preventDefault()},imgDropoverHandler(t){t.preventDefault(),this.overDashedBox=!1;const e=t.dataTransfer.files[0],s=2048e3;!Object(_["Nb"])(e.type)||e.size>s?toastInit({content:o["ub"].t("格式不支持或超出图片大小限制"),icon:"InfomationIcon",timeout:3e3,position:"top",type:"destructive"}):this.uploadImg(e)},mouseenterHandler(){this.showCover=!0},mouseleaveHandler(){this.showCover=!1},checkStudentInfo(){return-1===this.school.findIndex(t=>Object.keys(t)[0]===this.schoolName)?(y["b"].show(o["ub"].t("请选择正确的学校名称")),!1):!this.schoolID||this.dropStatus?(y["b"].show(o["ub"].t("请选择学校名称")),!1):!!this.studentUrl||(y["b"].show(o["ub"].t("请上传学生证照片")),!1)},updateDiaBtnStatus(t,e){let s=!0;t&&e&&(s=!1),C["b"].$emit("updateDiaBtnStatus",s)}}},j=O,k=(s("bfe4"),s("5a81"),Object(m["a"])(j,i,a,!1,null,"dff6c12c",null));e["default"]=k.exports},edcc:function(t,e,s){},eed0:function(t,e,s){"use strict";s("b7a8")},ef1e:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"value-modal"},[e("div",{staticClass:"value-modal_layout"},[e("div",{staticClass:"value-modal-title"},[t._v(t._s(t.title||t.$t("这些有趣的功能你知道吗？")))]),e("div",{staticClass:"value-modal-slide__wrap"},[e("ul",{ref:"slideDom",staticClass:"value-modal-slide__wrapreal",class:{"no-transition":t.removeTransition},style:t.transformStyle},t._l(t.showList,(function(s,i){return e("li",{key:i,ref:"slideItemDom",refInFor:!0,staticClass:"value-modal-slide__item",class:{center:t.currentIndex===i,"no-transition":t.removeTransition}},[s.image&&s.image.endsWith("mp4")?e("video",{key:s.image+"_"+i,ref:"videoRefs",refInFor:!0,staticClass:"value-modal-slide__video",attrs:{muted:"",loop:""},domProps:{muted:!0}},[e("source",{attrs:{type:"video/mp4",src:s.image}})]):e("img",{attrs:{src:t.currentIndex===i?s.image:s.cover}}),e("div",{staticClass:"value-modal-slide__title"},[t._v(t._s(s.name))]),e("p",{staticClass:"value-modal-slide__info"},[t._v(t._s(s.description))])])})),0)])]),e("button",{staticClass:"value-close m-popup__close-icon",on:{click:t.handleClose}},[e("CloseIcon",{staticClass:"value-close-icon"})],1),e("button",{staticClass:"arrow-left",on:{click:t.goNext}},[e("AngleRightIcon")],1),e("button",{staticClass:"arrow-right",on:{click:t.goPre}},[e("AngleLeftIcon")],1),e("div",{staticClass:"bg-value-line bg"},[e("div",{staticClass:"value-line inner",style:t.indicatorStyle})])])},a=[],o=s("9ab4"),r=s("60a3"),n=s("1252");let l=class extends r["g"]{constructor(){super(...arguments),this.timer=null,this.currentIndex=2,this.transX=0,this.removeTransition=!1,this.isTransition=!1,this.dir=0,this.initParams={gap:45,imgWidth:428,scale:1.3,containerWidth:706},this.title="",this.list=[],this.showList=[]}get transformStyle(){const{transX:t}=this;return{transform:`translateX(${parseFloat(t+"")}px)`}}get indicatorStyle(){const{currentIndex:t,totalNum:e}=this,s=100/e,i=this.showList[t].index;return{width:s+"%",left:(i-1)*s+"%"}}created(){const{ops:{attribute:t},calLeftDistance:e}=this;this.list=t.data,this.title=t.name,this.totalNum=this.list.length,this.showList=[this.list[this.totalNum-2],this.list[this.totalNum-1],...this.list,this.list[0],this.list[1]],this.transX=-e(2),this.$nextTick(()=>{this.$refs.slideDom.addEventListener("webkitTransitionEnd",this.handletransitionEnd),this.$parent&&this.$parent.$on("closed",this.handleClose),this.autoPlay(),this.controlVideoPlayback(),this.startCount()})}autoPlay(){const t=this.showList[this.currentIndex];this.sendSensors(t.type,!0),this.timer&&(clearTimeout(this.timer),this.timer=null)}startCount(){if(this.timer)return;const t=this.showList[this.currentIndex];t.image_time&&(this.timer=setTimeout(()=>{this.timer=null,this.sendSensors(t.type,!1),this.goNext()},1e3*t.image_time))}sendSensors(t="",e=!0){n["b"].track("value_popup_load",{action_position:"file"===this.ops.pathname?"files":"fileshome",action_type:e?"show":"done",action_detail:t})}handletransitionEnd(t){const{propertyName:e,srcElement:{_prevClass:s}}=t;"transform"===e&&"value-modal-slide__wrapreal"===s&&(this.isTransition=!1,this.dir>0&&this.currentIndex===this.totalNum+2&&(this.currentIndex=2,this.removeTransition=!0,this.transX=-this.calLeftDistance(2)),this.dir<0&&1===this.currentIndex&&(this.currentIndex=this.totalNum+1,this.removeTransition=!0,this.transX=-this.calLeftDistance(this.totalNum+1))),this.controlVideoPlayback(),this.startCount()}calLeftDistance(t){const{initParams:{gap:e,imgWidth:s,containerWidth:i}}=this,a=s+2*e;return a*t-(i-a)/2}goNext(){if(this.isTransition)return;const{initParams:{gap:t,imgWidth:e}}=this;this.removeTransition=!1,this.dir=1,this.currentIndex+=1,this.transX-=e+2*t,this.isTransition=!0,this.autoPlay()}goPre(){if(this.isTransition)return;const{initParams:{gap:t,imgWidth:e}}=this;this.transX+=e+2*t,this.removeTransition=!1,this.dir=-1,this.currentIndex-=1,this.isTransition=!0,this.autoPlay()}handleClose(){this.$parent&&this.$parent.handleClose()}controlVideoPlayback(){if(!this.$refs.slideItemDom)return;const t=Array.isArray(this.$refs.slideItemDom)?this.$refs.slideItemDom:[this.$refs.slideItemDom];t.forEach(t=>{const e=t.querySelector("video");e&&(e.pause(),e.currentTime=0)});const e=t[this.currentIndex],s=e.querySelector("video");if(s){const t=s;t.play()}}destroyed(){this.timer=null,this.$refs.slideDom&&this.$refs.slideDom.removeEventListener("webkitTransitionEnd",this.handletransitionEnd),this.$parent&&this.$parent.$off("closed",this.handleClose)}};Object(o["d"])([Object(r["e"])({type:Boolean})],l.prototype,"visible",void 0),Object(o["d"])([Object(r["e"])({type:Object,default:{}})],l.prototype,"ops",void 0),l=Object(o["d"])([Object(r["a"])({components:{}})],l);var c=l,d=c,u=(s("a5c5"),s("2877")),p=Object(u["a"])(d,i,a,!1,null,"955f9ee8",null);e["default"]=p.exports},f29e:function(t,e,s){"use strict";s("71e2")},f423:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"font-detail-dialog"},[e("ul",{staticClass:"font-detail-list"},t._l(t.fontList,(function(s,i){return e("li",{key:s.postScriptName,staticClass:"font-detail-list__item"},[s.coverUrl?e("img",{staticClass:"font-family",attrs:{src:s.coverUrl,alt:"font"}}):t._e(),e("div",{class:s.coverUrl?"font-style":"font-family__text"},[t._v(t._s(s.style))]),s.version===t.ops.font.version?e("div",{class:s.coverUrl?"font-version":"font-style"},[t._v(" v"+t._s(s.version)+" ")]):e("div",{class:s.coverUrl?"font-detail-version-tip":"font-style"},[t._v("v"+t._s(s.version))]),t.ops.showDownload?e("MButton",{staticStyle:{"margin-left":"auto","margin-right":"6px",height:"30px"},attrs:{type:"secondary",size:"sm",padding:"12"},on:{click:function(e){return t.downloadOneFont(s)}}},[t._v(" "+t._s(t.$t("下载"))+" ")]):t._e(),t.ops.showDelete?e("MButton",{staticStyle:{height:"30px"},attrs:{type:"secondary",size:"sm",padding:"12"},on:{click:function(e){return t.deleteFont(i)}}},[t._v(" "+t._s(t.$t("删除"))+" ")]):t._e()],1)})),0),e("div",{staticClass:"font-detail-footer"},[t.ops.showDownload?e("MButton",{attrs:{type:"secondary",size:"sm"},on:{click:t.downloadAllFont}},[t._v(" "+t._s(t.$t("下载全部"))+" ")]):t._e(),t.ops.showDelete?e("MButton",{attrs:{type:"secondary",size:"sm"},on:{click:t.deleteAllFont}},[t._v(t._s(t.$t("删除全部")))]):t._e()],1),e("Dialog",{staticClass:"confirm-dialog",attrs:{visible:t.showConfirm,title:t.confirmOpt.title,width:"400px"},on:{"update:visible":function(e){t.showConfirm=e}}},[e("div",{attrs:{slot:"default"},slot:"default"},[e("div",{staticClass:"confirm-dialog__content"},[t._v(t._s(t.confirmOpt.content))])]),e("div",{staticClass:"confirm-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[e("MButton",{staticStyle:{"margin-right":"12px",height:"36px"},attrs:{type:"secondary",size:"sm",padding:"12"},on:{click:function(e){t.showConfirm=!1}}},[t._v(" "+t._s(t.$t("取消"))+" ")]),e("MButton",{staticStyle:{height:"36px"},attrs:{type:"delete"===t.confirmOpt.type?"destructive":"highlight",size:"sm",padding:"12"},on:{click:t.onConfirm}},[t._v(" "+t._s(t.$t("delete"===t.confirmOpt.type?"删除":"继续"))+" ")])],1)])],1)},a=[],o=s("9ab4"),r=s("60a3"),n=s("9039"),l=s("be92"),c=s("e351"),d=(s("79f6c"),s("c4e3")),u=s.n(d),p=s("4d9c"),h=s("034a"),m=s("bcf3"),v=s("f3e7"),f=s("f182b");let b=class extends r["g"]{constructor(){super(...arguments),this.fontList=[],this.confirmOpt={title:"",content:"",onConfirm:()=>{}},this.showConfirm=!1}fontListChanged(t){this.fontList=t,0===(null===t||void 0===t?void 0:t.length)&&this.$emit("send")}isTTCFont(t){const e=t.originUrl,s=t.url;return(null===e||void 0===e?void 0:e.endsWith(".ttc"))||s.endsWith(".ttc")}downloadFont(t){const e=t.originUrl,s=e||t.url,i=document.createElement("a");i.download=`${t.family}-${t.style}`,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i);const{id:a,name:o}=Object(h["b"])().userInfo,{teamId:r,localizedFamily:n,localizedStyle:l}=t,c=[{action:"download_font",uid:a,details:{organizationId:this.currentOrgId,teamId:r,userName:o,actionType:"team",actionDetail:n,actionParameter1:l}}];Object(v["bb"])(c)}downloadFonts(t){return Object(o["c"])(this,void 0,void 0,(function*(){if(t.length<=1)return void this.downloadFont(t[0]);Object(p["b"])({content:v["ub"].t("下载中..."),timeout:3e3});const e=yield Promise.all(t.map(t=>new Promise(e=>{let s=`${t.family}-${t.style}`;const i=t.originUrl||t.url;fetch(i).then(t=>t.arrayBuffer()).then(t=>{e({buffer:t,fileName:s,fileType:i.split(".").pop()||"ttf"})})}))),s=new u.a;e.forEach(t=>{const{buffer:e,fileName:i,fileType:a}=t,o=new Date,r=new Date(o.getTime()-6e4*o.getTimezoneOffset());s.file(i+"."+a,e,{date:r})});const i=yield s.generateAsync({type:"blob"});Object(f["O"])("download",URL.createObjectURL(i)),Object(p["b"])({content:v["ub"].t("下载完成"),timeout:3e3})}))}deleteFont(t){this.confirmOpt=Object.assign(Object.assign({},this.confirmOpt),{title:v["ub"].t("删除字体"),content:v["ub"].t("确定要删除该字体吗？"),onConfirm:()=>{Object(m["a"])().deleteTeamFont({index:t,family:this.ops.font.family})},type:"delete"}),this.showConfirm=!0}downloadOneFont(t){this.isTTCFont(t)?(this.confirmOpt=Object.assign(Object.assign({},this.confirmOpt),{title:v["ub"].t("下载字体"),content:v["ub"].t("该字体含多个语言或多个字重，将会下载全部。是否继续下载"),onConfirm:()=>{this.downloadFont(t)},type:"download"}),this.showConfirm=!0):this.downloadFont(t)}downloadAllFont(){const t=new Map;let e=!1;this.fontList.forEach(s=>{const i=s.originUrl||s.url;t.has(i)||(!e&&this.isTTCFont(s)&&(e=!0),t.set(i,s))});const s=Array.from(t.values());e?(this.confirmOpt=Object.assign(Object.assign({},this.confirmOpt),{title:v["ub"].t("下载全部"),content:v["ub"].t("该字体含多个语言或多个字重，将会下载全部。是否继续下载"),onConfirm:()=>Object(o["c"])(this,void 0,void 0,(function*(){this.downloadFonts(s)})),type:"download"}),this.showConfirm=!0):this.downloadFonts(s)}deleteAllFont(){this.confirmOpt=Object.assign(Object.assign({},this.confirmOpt),{title:v["ub"].t("删除全部"),content:v["ub"].t("是否需要删除所有字体?"),onConfirm:()=>{Object(m["a"])().deleteAllTeamFont(this.ops.font.family)},type:"delete"}),this.showConfirm=!0}onConfirm(){this.showConfirm=!1,this.confirmOpt.onConfirm(!0)}};Object(o["d"])([Object(r["e"])({type:Object,default:{}})],b.prototype,"ops",void 0),Object(o["d"])([Object(r["h"])("ops.font.fonts",{immediate:!0})],b.prototype,"fontListChanged",null),b=Object(o["d"])([Object(r["a"])({components:{Dialog:n["a"]},computed:Object.assign({},Object(l["e"])(c["b"],{currentOrgId:t=>t.currentOrgId}))})],b);var g=b,y=g,_=(s("cd34"),s("2877")),w=Object(_["a"])(y,i,a,!1,null,"b8e439f8",null);e["default"]=w.exports},f53c:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"base-dialog-container",style:{height:t.ops.height,width:t.ops.width}},[e("CloseIcon",{staticClass:"base-dialog-close",style:{color:t.ops.closeColor},nativeOn:{click:function(e){return t.close.apply(null,arguments)}}}),t.ops.title?e("div",{staticClass:"base-dialog-header base-dialog-title"},[t._v(t._s(t.ops.title))]):t._e(),e("div",{staticClass:"base-dialog-content"},[t.ops.html?e("div",{domProps:{innerHTML:t._s(t.ops.html)}}):e("div",[t.ops.image?e("img",{style:{height:t.ops.imageHeight},attrs:{src:t.ops.image,usemap:"#dialogImageMap"},on:{click:t.imageClick}}):t._e(),t.ops.imageMap?e("map",{attrs:{name:"dialogImageMap"}},t._l(t.ops.imageMap,(function(s,i){return e("area",{key:"mapArea"+i,attrs:{shape:"rect",coords:s.coords},on:{click:function(e){return e.stopPropagation(),t.areaClick(s)}}})})),0):t._e(),t.ops.descriptionHtml?e("div",{domProps:{innerHTML:t._s(t.ops.descriptionHtml)}}):t._e(),t.ops.description?e("div",{staticClass:"base-dialog-context"},[t.ops.description.title?e("div",{staticClass:"base-dialog-title"},[t._v(t._s(t.ops.description.title))]):t._e(),t.ops.description.text?e("div",{staticClass:"base-dialog-text"},[t._v(t._s(t.ops.description.text))]):t._e()]):t._e()])]),t.ops.cancelText||t.ops.confirmText?e("div",{staticClass:"base-dialog-footer"},[t.ops.cancelText?e("MButton",{staticClass:"base-dialog-cancel",attrs:{size:"md",padding:"24",type:"secondary"},on:{click:t.cancel}},[t._v(" "+t._s(t.ops.cancelText)+" ")]):t._e(),t.ops.confirmText?e("MButton",{attrs:{size:"md",padding:"24"},on:{click:t.confirm}},[t._v(t._s(t.ops.confirmText))]):t._e()],1):t._e()],1)},a=[],o=s("2b0e"),r=s("f182b"),n=Object(o["defineComponent"])({name:"BaseDialogTemplate",props:{ops:{type:Object,default:()=>({})}},methods:{close(){this.$emit("send")},cancel(){this.close()},confirm(){this.linkHandle(this.ops.confirmLink),this.close()},imageClick(){this.ops.imageLink&&(this.linkHandle(this.ops.imageLink),this.close())},areaClick(t){this.linkHandle(t.link),this.close()},linkHandle(t){t&&(/^http/.test(t)?Object(r["jc"])(t):this.$router.push({path:t}))}}}),l=n,c=(s("eed0"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,null,null);e["default"]=d.exports},f553:function(t,e,s){"use strict";s("0c80")},f939:function(t,e,s){"use strict";s("e71f")},fc7b:function(t,e,s){}}]);